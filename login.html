<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <link rel="stylesheet" href="css/loginvaregister.css">
</head>
<body>

<!-- LOGIN -->
<div class="login-box" id="loginBox">
    <h2>Đăng nhập</h2>
    <input type="text" id="loginUsername" placeholder="Tên đăng nhập">
    <input type="password" id="loginPassword" placeholder="Mật khẩu">
    <button onclick="login()">Đăng nhập</button>
    <p id="loginError" class="error"></p>
    <p>
        Chưa có tài khoản?
        <a href="#" onclick="showRegister()">Đăng ký</a>
    </p>
</div>

<!-- REGISTER -->
<div class="login-box" id="registerBox" style="display:none;">
    <h2>Đăng ký</h2>
    <input type="text" id="registerUsername" placeholder="Tên đăng nhập">
    <input type="password" id="registerPassword" placeholder="Mật khẩu">
    <button onclick="register()">Đăng ký</button>
    <p id="registerError" class="error"></p>
    <p>
        Đã có tài khoản?
        <a href="#" onclick="showLogin()">Đăng nhập</a>
    </p>
</div>

<script>
// HIỂN THỊ FORM
function showRegister() {
    document.getElementById("loginBox").style.display = "none";
    document.getElementById("registerBox").style.display = "block";
}

function showLogin() {
    document.getElementById("registerBox").style.display = "none";
    document.getElementById("loginBox").style.display = "block";
}

// ĐĂNG KÝ
function register() {
    var username = document.getElementById("registerUsername").value;
    var password = document.getElementById("registerPassword").value;

    if (username === "" || password === "") {
        document.getElementById("registerError").innerText =
            "Vui lòng nhập đầy đủ thông tin!";
        return;
    }

    // Lưu tài khoản
    localStorage.setItem("username", username);
    localStorage.setItem("password", password);

    alert("Đăng ký thành công! Vui lòng đăng nhập.");

    // Quay về đăng nhập
    showLogin();

    // TỰ ĐỘNG ĐIỀN TK VỪA ĐĂNG KÝ
    document.getElementById("loginUsername").value = username;
    document.getElementById("loginPassword").value = password;
}

// ĐĂNG NHẬP
function login() {
    var username = document.getElementById("loginUsername").value;
    var password = document.getElementById("loginPassword").value;

    var savedUser = localStorage.getItem("username");
    var savedPass = localStorage.getItem("password");

    if (username === savedUser && password === savedPass) {
        alert("Đăng nhập thành công!");
        localStorage.setItem("currentUser", username);
        window.location.href = "index.html";
    } else {
        document.getElementById("loginError").innerText =
            "Sai tên đăng nhập hoặc mật khẩu!";
    }
}
</script>

</body>
</html>
